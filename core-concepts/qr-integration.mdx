---
title: "QR Code Integration"
description: "Learn how to implement UIP authentication with device detection, QR code display, and deep linking for optimal user experience."
---

## How UIP Authentication Works

UIP uses a simple two-path UX based on the user's device. Your application detects the device type and shows the appropriate interface:

<CardGroup cols={2}>
  <Card title="Desktop Flow" icon="desktop">
    Display the QR code image returned by the API. The user scans it with their UIP app to complete verification.
  </Card>

  <Card title="Mobile Flow" icon="mobile-screen">
    Display an "Open UIP" button that deep links into the UIP app. No QR code scanning needed on mobile.
  </Card>
</CardGroup>

## Implementation Flow

<Steps>
  <Step title="Create a Session">
    Call `POST /v1/identify` or `POST /v1/sign` with your intent. The API returns a `session_id`, `qr_code` (base64 PNG data URI), and `expires_at`.

    ```javascript
    const session = await fetch('https://api.uip.digital/v1/identify', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${API_KEY}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        intent: 'Sign in to My App',
        requested_data: ['first_name', 'last_name']
      })
    }).then(r => r.json());
    // session = { session_id, qr_code, expires_at }
    ```
  </Step>

  <Step title="Detect Device Type">
    Use user-agent detection to determine if the user is on mobile or desktop:

    ```javascript
    const isMobile = /iPhone|iPad|Android/i.test(navigator.userAgent);
    ```
  </Step>

  <Step title="Display QR Code (Desktop) or Deep Link (Mobile)">
    **Desktop:** Display the `qr_code` from the API response as an image. It is a base64-encoded PNG data URI that you can use directly as an `<img>` `src`.

    **Mobile:** Display an "Open UIP" button linking to `https://www.uip.id/{session_id}`. This deep links into the UIP app.

    ```html
    <div id="uip-desktop">
      <img id="uip-qr" alt="Scan with UIP app to verify identity" />
      <p>Scan with UIP app</p>
    </div>

    <div id="uip-mobile" style="display: none;">
      <a id="uip-link" class="button">Open UIP</a>
    </div>

    <script>
      const isMobile = /iPhone|iPad|Android/i.test(navigator.userAgent);

      if (isMobile) {
        document.getElementById('uip-desktop').style.display = 'none';
        document.getElementById('uip-mobile').style.display = 'block';
        document.getElementById('uip-link').href =
          `https://www.uip.id/${sessionId}`;
      } else {
        // qr_code from API response is a base64-encoded PNG data URI
        document.getElementById('uip-qr').src = qrCode;
      }
    </script>
    ```
  </Step>

  <Step title="Poll for Completion">
    Poll `GET /v1/identify/:id` (or `GET /v1/sign/:id`) every 2-3 seconds. When the status changes to `completed`, all verified data is included in the response.

    ```javascript
    async function pollForResult(sessionId, apiKey) {
      while (true) {
        const res = await fetch(
          `https://api.uip.digital/v1/identify/${sessionId}`,
          { headers: { 'Authorization': `Bearer ${apiKey}` } }
        );
        const data = await res.json();

        if (data.status === 'completed') return data;
        if (data.status === 'expired') throw new Error('Session expired');

        await new Promise(r => setTimeout(r, 2500));
      }
    }
    ```
  </Step>

  <Step title="Use the Verified Data">
    The completed response includes all requested identity data (or signature proof). Use it to complete the user's action.
  </Step>
</Steps>

<Info>
**No webhooks needed for Identify and Sign.** The polling flow is the primary integration pattern. Webhooks are only used for the Message API and Authorize API.
</Info>

<Note>
**Future SDK:** A client-side SDK is planned that will handle device detection, QR rendering, and polling automatically. For now, implement this logic in your application.
</Note>

## QR Code Details

The `qr_code` field in the API response is a base64-encoded PNG data URI. It encodes a URL in the format `https://www.uip.id/{session_id}`.

<AccordionGroup>
  <Accordion title="Using the QR Code" icon="qrcode" defaultOpen>
    The QR code is ready to use directly as an image source:

    ```javascript
    // qr_code from API is like: "data:image/png;base64,iVBORw0KGgo..."
    document.getElementById('qr-img').src = session.qr_code;
    ```

    You do not need to generate your own QR code -- the API provides it.
  </Accordion>

  <Accordion title="Deep Link URL" icon="link">
    For mobile users, construct the deep link URL from the session ID:

    ```
    https://www.uip.id/{session_id}
    ```

    This URL opens the UIP app directly with the session details.
  </Accordion>
</AccordionGroup>

## QR Code Display Best Practices

<AccordionGroup>
  <Accordion title="Size and Positioning" icon="maximize">
    - **Minimum size:** 200x200 pixels for reliable scanning
    - **Recommended:** 256x256 to 300x300 pixels
    - **Center the QR code** prominently on the page
    - Add adequate white space (quiet zone) around the QR code
  </Accordion>

  <Accordion title="Visual Feedback" icon="spinner">
    - Show loading indicator while waiting for scan
    - Display clear instructions: "Scan with UIP app"
    - Add animated elements to draw attention to the QR code
    - Show a countdown timer for session expiration
  </Accordion>

  <Accordion title="Error States" icon="triangle-exclamation">
    - Handle expired sessions gracefully (5-minute expiry)
    - Show "Try Again" button to generate a new session
    - Display clear error messages for connection issues
    - Provide fallback options if QR scanning fails
  </Accordion>

  <Accordion title="Accessibility" icon="universal-access">
    - Provide alt text for screen readers
    - Include text instructions alongside QR code
    - Ensure sufficient color contrast for visibility
    - Consider alternative authentication methods for accessibility
  </Accordion>
</AccordionGroup>

## Session Management

<CardGroup cols={2}>
  <Card title="Session Expiration" icon="clock">
    Sessions expire after **5 minutes**. Always check expiration status and generate new sessions as needed. Show a timer to the user.
  </Card>

  <Card title="One-Time Use" icon="shield-check">
    Each session is **single-use**. After the user completes verification, the session cannot be reused.
  </Card>

  <Card title="HTTPS Required" icon="lock">
    All UIP integrations must use **HTTPS in production** to prevent man-in-the-middle attacks.
  </Card>

  <Card title="Concurrent Sessions" icon="users">
    Support multiple concurrent sessions for users authenticating from different tabs or devices.
  </Card>
</CardGroup>

## Updating the Frontend

Use WebSockets, Server-Sent Events, or short polling from your frontend to detect when the backend receives a completed result.

<CardGroup cols={3}>
  <Card title="WebSockets" icon="bolt">
    Best for real-time bidirectional communication. Ideal for dashboards and interactive applications.
  </Card>

  <Card title="Server-Sent Events" icon="rss">
    Simple one-way updates from server to client. Perfect for status updates and notifications.
  </Card>

  <Card title="Short Polling" icon="rotate">
    Poll your own backend every 2-3 seconds. Simple and works everywhere as a fallback.
  </Card>
</CardGroup>

## Testing QR Flows

<Steps>
  <Step title="Use Your $5 Signup Credit">
    New accounts receive $5 in credits -- enough for extensive testing
  </Step>

  <Step title="Create Your UIP Identity">
    Create your own UIP identity to test the full flow end-to-end
  </Step>

  <Step title="Test Device Detection">
    Verify your device detection logic shows QR codes on desktop and deep link buttons on mobile
  </Step>

  <Step title="Test Error Scenarios">
    Test session expiration, user cancellation, and network errors to ensure proper error handling
  </Step>
</Steps>

## Next Steps

<CardGroup cols={3}>
  <Card
    title="Quickstart"
    icon="rocket"
    href="/quickstart"
  >
    Build your first integration with working code
  </Card>

  <Card
    title="Identify API"
    icon="fingerprint"
    href="/api-reference/endpoint/identify"
  >
    Full API reference for authentication
  </Card>

  <Card
    title="Error Handling"
    icon="triangle-exclamation"
    href="/core-concepts/error-handling"
  >
    Handle errors gracefully
  </Card>
</CardGroup>
